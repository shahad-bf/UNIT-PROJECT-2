{% extends 'main/base.html' %}

{% block title %}Book Appointment - Dr. {{ doctor_profile.user.get_full_name }}{% endblock %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto; padding: 20px;">
  <div class="item" style="padding: 40px;">
    <div style="margin-bottom: 30px;">
      <h1 style="font-size: 28px; font-weight: 600; color: var(--text-color); margin-bottom: 10px;">Book Appointment</h1>
      <div style="display: flex; align-items: center; gap: 15px; padding: 20px; background: var(--dashboard-body-color); border-radius: 12px; margin-bottom: 20px;">
        <span class="material-symbols-outlined" style="font-size: 48px; color: var(--primary-color);">account_circle</span>
        <div>
          <h3 style="font-size: 20px; font-weight: 600; color: var(--text-color); margin: 0;">Dr. {{ doctor_profile.user.get_full_name }}</h3>
          <p style="color: var(--light-text-color); margin: 5px 0;">{{ doctor_profile.specialty.name }}</p>
          <p style="color: var(--light-text-color); margin: 0; font-size: 14px;">{{ doctor_profile.consultation_fee }} SAR</p>
        </div>
      </div>
      

    </div>

    <form method="post" enctype="multipart/form-data" style="display: grid; gap: 25px;">
      {% csrf_token %}
      
      <!-- Patient Information -->
      <div style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px;">
        <h3 style="font-size: 18px; font-weight: 600; color: var(--text-color); margin-bottom: 15px;">Patient Information</h3>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
          <div>
            <label style="display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-color);">Full Name *</label>
            <input type="text" name="patient_name" required
                   style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--white-color); color: var(--text-color); font-size: 14px;">
          </div>
          
          <div>
            <label style="display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-color);">Patient ID *</label>
            <input type="text" name="patient_id" required placeholder="Enter your patient ID"
                   style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--white-color); color: var(--text-color); font-size: 14px;">
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
          <div>
            <label style="display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-color);">Gender</label>
            <select name="gender"
                    style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--white-color); color: var(--text-color); font-size: 14px;">
              <option value="">Select gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
            </select>
          </div>
          
          <div>
            <label style="display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-color);">Age</label>
            <input type="number" name="age" min="1" max="120" placeholder="Years"
                   style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--white-color); color: var(--text-color); font-size: 14px;">
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
          <div>
            <label style="display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-color);">Height (cm)</label>
            <input type="number" name="height" step="0.01" min="50" max="250" placeholder="e.g., 170.5"
                   style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--white-color); color: var(--text-color); font-size: 14px;">
          </div>
          
          <div>
            <label style="display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-color);">Weight (kg)</label>
            <input type="number" name="weight" step="0.01" min="10" max="300" placeholder="e.g., 70.5"
                   style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--white-color); color: var(--text-color); font-size: 14px;">
          </div>
        </div>
        
      </div>
      
      <!-- Health Condition -->
      <div style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px;">
        <h3 style="font-size: 18px; font-weight: 600; color: var(--text-color); margin-bottom: 15px;">Health Condition</h3>
        
        <div style="margin-bottom: 20px;">
          <label style="display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-color);">Health Condition Description</label>
          <textarea name="health_condition" rows="4" placeholder="Please describe your current health condition, symptoms, or any relevant medical information..."
                    style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--white-color); color: var(--text-color); font-size: 14px; resize: vertical;"></textarea>
        </div>
        

      </div>
      
      <!-- Appointment Details -->
      <div style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px;">
        <h3 style="font-size: 18px; font-weight: 600; color: var(--text-color); margin-bottom: 15px;">Appointment Details</h3>
        
        <div>
          <label style="display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-color);">Preferred Date *</label>
          <input type="date" name="appointment_date" required min="{{ today }}"
                 style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--white-color); color: var(--text-color); font-size: 14px;">
        </div>
      </div>
      

      
      <!-- Submit Buttons -->
      <div style="display: flex; gap: 15px; margin-top: 20px;">
        <button type="submit" 
                style="flex: 1; background: var(--primary-color); color: white; padding: 15px 30px; border-radius: 8px; font-weight: 500; border: none; cursor: pointer; transition: var(--tran-03);">
          Book Appointment
        </button>
        
        <a href="{% url 'main:doctors_list_view' %}" 
           style="flex: 1; background: var(--white-color); color: var(--text-color); padding: 15px 30px; border-radius: 8px; font-weight: 500; border: 1px solid var(--border-color); text-decoration: none; text-align: center; transition: var(--tran-03);">
          Cancel
        </a>
      </div>
    </form>
  </div>
</div>

<script>
// Set minimum date to today
document.addEventListener('DOMContentLoaded', function() {
    const dateInput = document.querySelector('input[name="appointment_date"]');
    const today = new Date().toISOString().split('T')[0];
    dateInput.setAttribute('min', today);
});
</script>
{% endblock %} 