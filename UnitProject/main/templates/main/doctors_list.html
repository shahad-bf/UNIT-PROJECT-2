{% extends 'main/base.html' %}

{% block title %}Find Doctors - Medical Consultation System{% endblock %}

{% block content %}



<!-- Search and Filter Section -->
<div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
  <div class="item" style="padding: 20px; margin-bottom: 30px;">
    <form method="get" style="display: grid; grid-template-columns: 1fr 1fr 1fr 200px; gap: 20px; align-items: end;">
      <!-- Search Input -->
      <div>
        <label style="display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-color);">Search</label>
        <input type="text" name="search" value="{{ search_query }}" 
               placeholder="Doctor name or specialty..."
               style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--white-color); color: var(--text-color); font-size: 14px;">
      </div>
      
      <!-- Specialty Filter -->
      <div>
        <label style="display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-color);">Specialty</label>
        <select name="specialty" style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--white-color); color: var(--text-color); font-size: 14px;">
          <option value="">All Specialties</option>
          {% for specialty in specialties %}
            <option value="{{ specialty.id }}" {% if specialty.id|stringformat:"s" == selected_specialty %}selected{% endif %}>
              {{ specialty.name }}
            </option>
          {% endfor %}
        </select>
      </div>
      
      <!-- Gender Filter -->
      <div>
        <label style="display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-color);">Gender</label>
        <select name="gender" style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--white-color); color: var(--text-color); font-size: 14px;">
          <option value="">All Genders</option>
          {% for value, label in gender_choices %}
            <option value="{{ value }}" {% if value == selected_gender %}selected{% endif %}>
              {{ label }}
            </option>
          {% endfor %}
        </select>
      </div>
      
      <!-- Search Button -->
      <button type="submit" style="background: var(--primary-color); color: white; padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-weight: 500; transition: var(--tran-03);">
        <span class="material-symbols-outlined" style="margin-right: 8px;">search</span>
        Search
      </button>
    </form>
  </div>

  <!-- Doctors Grid -->
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
    {% for doctor in doctors %}
      <div class="item" style="padding: 0; overflow: hidden; transition: var(--tran-04);">
        <!-- Doctor Image Placeholder -->
        <div style="height: 200px; background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-color2) 100%); display: flex; align-items: center; justify-content: center;">
          <span class="material-symbols-outlined" style="font-size: 80px; color: white;">account_circle</span>
        </div>
        
        <div style="padding: 20px;">
          <h3 style="font-size: 20px; font-weight: 600; color: var(--text-color); margin-bottom: 10px;">
            Dr. {{ doctor.user.first_name }} {{ doctor.user.last_name }}
          </h3>
          
          {% if doctor.specialty %}
            <p style="color: var(--primary-color); font-weight: 500; margin-bottom: 10px;">{{ doctor.specialty.name }}</p>
          {% endif %}
          
          <div style="display: flex; align-items: center; color: var(--light-text-color); margin-bottom: 8px;">
            <span class="material-symbols-outlined" style="font-size: 16px; margin-right: 8px;">work</span>
            <span style="font-size: 14px;">{{ doctor.years_experience }} years experience</span>
          </div>
          
          {% if doctor.consultation_fee %}
            <div style="display: flex; align-items: center; color: var(--light-text-color); margin-bottom: 15px;">
              <span class="material-symbols-outlined" style="font-size: 16px; margin-right: 8px;">payments</span>
              <span style="font-size: 14px;">{{ doctor.consultation_fee }} SAR</span>
            </div>
          {% endif %}
          
          {% if doctor.bio %}
            <p style="color: var(--light-text-color); font-size: 14px; margin-bottom: 20px; line-height: 1.5;">
              {{ doctor.bio|truncatewords:20 }}
            </p>
          {% endif %}
          
          <div style="display: flex; gap: 10px;">
                <a href="{% url 'doctors:book_appointment_view' doctor.id %}" style="flex: 1; background: var(--primary-color); color: white; text-align: center; padding: 12px; border-radius: 8px; font-weight: 500; transition: var(--tran-03); text-decoration: none; display: block;">
              Book Appointment
            </a>
            
            <button style="padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--white-color); cursor: pointer; transition: var(--tran-03);">
              <span class="material-symbols-outlined" style="color: var(--light-text-color);">info</span>
            </button>
          </div>
        </div>
      </div>
    {% empty %}
      <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
        <span class="material-symbols-outlined" style="font-size: 80px; color: var(--border-color); margin-bottom: 20px; display: block;">search_off</span>
        <h3 style="font-size: 20px; font-weight: 500; color: var(--text-color); margin-bottom: 10px;">No doctors found</h3>
        <p style="color: var(--light-text-color);">Try adjusting your search criteria or browse all doctors.</p>
      </div>
    {% endfor %}
  </div>
  
  <!-- Doctors Information Section -->
  <div class="item" style="margin-top: 40px; padding: 40px; text-align: center; background: var(--dashboard-body-color);">
    <h3 style="font-size: 24px; font-weight: 600; color: var(--text-color); margin-bottom: 15px;">Find the Right Doctor for You</h3>
    <p style="color: var(--light-text-color); margin-bottom: 25px;">Our qualified medical professionals are here to provide you with expert healthcare services.</p>
  </div>
</div>

<style>
  /* Hover effects for doctor cards */
  .item:hover {
    transform: translateY(-5px);
    box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.15);
  }
  
  /* Button hover effects */
  button:hover, a[style*="background: var(--primary-color)"]:hover {
    background: var(--primary-color2) !important;
    transform: translateY(-2px);
  }
  
  /* Form responsive */
  @media (max-width: 768px) {
    form[style*="grid-template-columns"] {
      grid-template-columns: 1fr !important;
    }
    
    div[style*="grid-template-columns: repeat(auto-fit"] {
      grid-template-columns: 1fr !important;
    }
  }
</style>

{% endblock %} 